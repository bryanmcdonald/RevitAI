# P2-08.5: Annotation & Reference Tools

**Goal**: Create callouts, legends, legend components, and revision clouds.

**Prerequisites**: P2-08.1 complete (DraftingHelper — `BuildClosedCurveLoop`, `ParsePointArray`).

**Status**: Not started

---

## Tools (4)

| Tool | Purpose | RequiresTransaction |
|------|---------|---------------------|
| `place_callout` | Create callout (detail or section) | true |
| `create_legend` | Create legend view | true |
| `place_legend_component` | Add family representation to legend | true |
| `place_revision_cloud` | Draw revision markup cloud | true |

---

## Files to Create

```
src/RevitAI/Tools/DraftingTools/
    PlaceCalloutTool.cs
    CreateLegendTool.cs
    PlaceLegendComponentTool.cs
    PlaceRevisionCloudTool.cs
```

---

## Key API Details

### Callout
```csharp
// Detail callout
ViewSection.CreateCallout(doc, parentViewId, detailViewFamilyTypeId, minPt, maxPt);

// Section callout
ViewSection.CreateCallout(doc, parentViewId, sectionViewFamilyTypeId, minPt, maxPt);
```
Note: The overload used depends on whether creating a plan callout or section callout.

### Legend View
```csharp
var legendType = FindViewFamilyType(doc, ViewFamily.Legend);
var legend = View.CreateLegend(doc, legendType.Id);
legend.Name = name;
legend.Scale = scale;
```

### Legend Component
```csharp
doc.Create.NewFamilyInstance(location, symbol, legendView);
```
Note: `view_direction` parameter may not be directly settable via API — test and document.

### Revision Cloud
```csharp
RevisionCloud.Create(doc, view, revisionId, new List<CurveLoop> { curveLoop });
```
Requires at least one revision to exist. Use `Revision.GetAllRevisionIds(doc)` to check.

---

## Verification (Manual)

1. In a floor plan: "Create a detail callout from (10,10) to (20,20)"
2. "Create a door legend called 'Door Schedule Legend'"
3. "Add the 36x84 single-flush door to the legend at (0.5, 0.5)"
4. "Add a revision cloud around area (0,0) to (5,5)"
5. Verify callout creates a new view, legend is populated, cloud appears
